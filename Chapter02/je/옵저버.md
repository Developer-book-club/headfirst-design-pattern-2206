## ì˜µì €ë²„ íŒ¨í„´ ì´í•´í•˜ê¸°
- ì˜µì €ë²„íŒ¨í„´ = `subject`(ì£¼ì œ (ex.ì‹ ë¬¸ì‚¬)) + `observer`(ì˜µì €ë²„ (ex.êµ¬ë…ì))
  - `subject`ì—ì„œ ì¤‘ìš”í•œ ë°ì´í„°ë¥¼ ê´€ë¦¬
  - `subject`ë°ì´í„°ê°€ ë°”ë€Œë©´ `observer`ì—ê²Œ ì†Œì‹ ì „ë‹¬
  - `observer`ëŠ” `subject`ê°ì²´ì— ë“±ë¡ë˜ì–´ ìˆìŒ

- ì˜ˆì‹œ 
  ![ì˜µì €ë²„íŒ¨í„´ì˜ˆì‹œ](./img/observerì˜ˆì‹œ1.png)
  - ìœ íŠœë¸Œ ì±„ë„ì€ ìƒíƒœë¥¼ ì €ì¥
  - ìœ íŠœë¸Œ ì±„ë„ì€ ì˜ìƒ(ìƒíƒœ)ì´ ì—…ë°ì´íŠ¸ ë˜ë©´ êµ¬ë…ìì—ê²Œ ì•Œë¦¼
  - êµ¬ë…ìëŠ” êµ¬ë… í•´ì§€ ìš”ì²­ì„ í†µí•´ `observer`ì§‘í•©ì—ì„œ ì œê±° ê°€ëŠ¥

> ğŸ’¡ **ì˜µì €ë²„ íŒ¨í„´(Observer Pattern) ì •ì˜**
> - **í•œ ê°ì²´ì˜ ìƒíƒœê°€ ë°”ë€Œë©´** ê·¸ ê°ì²´ì— ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ì—ê²Œ ì—°ë½ì´ ê°€ê³  </br>
> **ìë™ìœ¼ë¡œ ë‚´ìš©ì´ ê°±ì‹ **ë˜ëŠ” ë°©ì‹
> - **ì¼ëŒ€ë‹¤(one-to-many)ì˜ì¡´ì„±**ì„ ì •ì˜
> - ê´€ì°°ì íŒ¨í„´ì´ë¼ê³ ë„ í•¨
> > **ì¼ëŒ€ë‹¤ ê´€ê³„** (í•˜ë‚˜ì˜ `subject`ì™€ ì—¬ëŸ¬ ê°œì˜ `observer`ê°€ ì—°ê´€!) </br>
> > - `subject`ê°€ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ì œì–´
> > â†’ ìƒíƒœê°€ ë“¤ì–´ ìˆëŠ” ê°ì²´ëŠ” í•˜ë‚˜
> > - `observer`ëŠ” ìƒíƒœë¥¼ ì‚¬ìš©ë§Œ í•œë‹¤(ì†Œìœ x)
> > - `subject`ê°€ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì•Œë¦¼ â†’ `observer`ëŠ” `subject`ì— ì˜ì¡´ì 
> 
> > vs **Publish-Subscribe(ì¶œíŒ-êµ¬ë…)íŒ¨í„´**</br>
> > - Publish-Subscribe íŒ¨í„´ì€ observer íŒ¨í„´ë³´ë‹¤ ì¡°ê¸ˆ ë” ë³µì¡
> > - `subscriber`ê°€ ë‹¤ì–‘í•œ íƒ€ì…ì˜ ë©”ì„¸ì§€ì— ê´€ì‹¬ì„ ì„¤ì •ê°€ëŠ¥
> > - `subscriber`ì™€ `publisher`ë¥¼ ë” ì„¸ì„¸í•œ ë¶„ë¦¬ ê°€ëŠ¥
> > 
> 
> > **ëŠìŠ¨í•œê²°í•©(Loose Coupling)**</br>
> > : ê°ì²´ë“¤ì´ ìƒí˜¸ì‘ìš©í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ì„œë¡œë¥¼ ì˜ ëª¨ë¥´ëŠ” ê´€ê³„</br>
> > : êµ¬ì„± ìš”ì†Œê°€ ì„œë¡œ ì•½í•˜ê²Œ ì—°ê´€â†’ êµ¬ì„±ìš”ì†Œì˜ ë³€í™”ê°€ ì„œë¡œì—ê²Œ ì ì€ ì˜í–¥ì„ ë¯¸ì¹¨
> > - ì˜µì €ë²„ íŒ¨í„´ì€ ëŠìŠ¨í•œ ê²°í•©ì¸ê°€?
> >   - `subject`ëŠ” ì˜µì €ë²„ê°€ Observer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤ëŠ” ì‚¬ì‹¤ë§Œ ì•ˆë‹¤
> >   - `observer`ëŠ” ì–¸ì œëŠ” ì¶”ê°€ ê°€ëŠ¥
> >   - ìƒˆë¡œìš´ í˜•ì‹ì˜ `observer` ì¶”ê°€ì—ë„ `subject`ëŠ” ë³€ê²½ í•„ìš” ì—†ìŒ
> >   - ì„œë¡œ ë…ë¦½ì ì¸ ì¬ì‚¬ìš© ê°€ëŠ¥
> >   - ì„œë¡œì˜ ë³€í™”ëŠ” ì„œë¡œì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŒ
> > >**ê²°í•©ë„** </br>: í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ë‹¤ë¥¸ í´ë˜ìŠ¤ì™€ ì–¼ë§ˆë‚˜ ë§ì´ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í‘œí˜„

### êµ¬í˜„
ë³´í†µì€ `subject`ì¸í„°í˜ì´ìŠ¤ì™€ `observer`ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„
  - `subject`ì¸í„°í˜ì´ìŠ¤
    - `observer` ë“±ë¡/íƒˆí‡´, ì—…ë°ì´íŠ¸ ì•Œë¦¼
    ```java
    package headfirst.designpatterns.observer.simple;
        
    public interface Subject {
        public void registerObserver(Observer o);
        public void removeObserver(Observer o);
        public void notifyObservers();
    }
    ```
  
  - `observer`ì¸í„°í˜ì´ìŠ¤
    - ì˜µì €ë²„ê°€ ë  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ê°ì²´ëŠ” ë°˜ë“œì‹œ Observer ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
    - `update()` : `subject`ì˜ ìƒíƒœê°€ ë°”ë€Œì—ˆì„ ë•Œ ë©”ì†Œë“œ 
    ```java
    package headfirst.designpatterns.observer.simple;

    public interface Observer {
        public void update(int value);
    }

    ```
    
  - subject êµ¬í˜„ í´ë˜ìŠ¤
    - setter/getter ë©”ì†Œë“œê°€ ë“¤ì–´ìˆì„ ìˆ˜ë„ ìˆìŒ
    ```java
    package headfirst.designpatterns.observer.simple;
    
    import java.util.*;
    
    public class SimpleSubject implements Subject {
    private List<Observer> observers;
    private int value = 0;
    
          public SimpleSubject() {
              observers = new ArrayList<Observer>();
          }
    
          public void registerObserver(Observer o) {
              observers.add(o);
          }
    
          public void removeObserver(Observer o) {
              observers.remove(o);
          }
          
          //ì—¬ê¸°ì„  pushë°©ì‹ì„ ì‚¬ìš©í–ˆë‹¤.
          //pushë°©ì‹ : ì£¼ì œê°€ ì˜µì €ë²„ì—ê²Œ ìƒíƒœë¥¼ ì•Œë¦¬ëŠ” ë°©ì‹
          public void notifyObservers() {
              for (Observer observer : observers) {
                  observer.update(value);
              }
          }
    
          public void setValue(int value) {
              this.value = value;
              notifyObservers();
          }
    }
    ```
  - observer êµ¬í˜„ í´ë˜ìŠ¤
    ```java
    package headfirst.designpatterns.observer.simple;
        
    public class SimpleObserver implements Observer {
        private int value;
        private Subject simpleSubject;
        
        public SimpleObserver(Subject simpleSubject) {
            this.simpleSubject = simpleSubject;
            simpleSubject.registerObserver(this);
        }
        
        public void update(int value) {
            this.value = value;
            display();
        }
        
        public void display() {
            System.out.println("Value: " + value);
        }
    }
    
    ```
    
  - ì‹¤í–‰
    ```java
    package headfirst.designpatterns.observer.simple;
    
    public class Example {
    
        public static void main(String[] args) {
            SimpleSubject simpleSubject = new SimpleSubject();
        
            SimpleObserver simpleObserver = new SimpleObserver(simpleSubject);
    
            SimpleObserver simpleObserver2 = new SimpleObserver(simpleSubject);
            
            simpleSubject.setValue(80);
            
            simpleSubject.removeObserver(simpleObserver);
        }
    }
    
    ```
  - ê²°ê³¼</br>
    ![ê²°ê³¼](img/ê²°ê³¼.png)

### í’€ ë°©ì‹ìœ¼ë¡œ ë°”ê¾¸ê¸° (105p)
> - push : `subject`ê°€ `observer`ì—ê²Œ ìƒíƒœë¥¼ ì•Œë¦¬ëŠ” ë°©ì‹
> - pull : `observer`ê°€ `subject`ë¡œ ë¶€í„° ìƒíƒœë¥¼ ëŒì–´ì˜¤ëŠ” ë°©ì‹

- push ë¥¼ ì‚¬ìš©í•  ë•Œ í•˜ë‚˜ì˜ ë°ì´í„°ë§Œ ê°±ì‹ í•´ë„ ë˜ëŠ” ìƒí™©ì—ì„œë„
  update()ë©”ì†Œë“œì— ëª¨ë“  ë°ì´í„°ë¥¼ ë³´ë‚´ë„ë¡ ë˜ì–´ìˆë‹¤.
  ```java
    public void notifyObservers() {
      for (Observer observer : observers) {
        observer.update(temperature, humidity, pressure);
      }
    }// 95p
  ```
- fullë°©ì‹ìœ¼ë¡œ ë°”ê¿” ë´…ì‹œë‹¤!
    - ì£¼ì œì—ì„œ ì•Œë¦¼ ë³´ë‚´ê¸°
      ```java
        public void notifyObservers() {
          for (Observer observer : observers) {
            observer.update();//ì˜µì €ë²„ì˜ updateë¥¼ ì¸ìì—†ì´ í˜¸ì¶œ
          }
        }// 105p
      ```
    - ì˜µì €ë²„ì—ì„œ ì•Œë¦¼ ë°›ê¸°<br/>
      (ì˜µì €ë²„ì˜ update()ë¥¼ ê³ ì³ì¤ë‹ˆë‹¤!)
      ```java
        public interface Observer {
          public void update(); //ë§¤ê°œë³€ìˆ˜ ì—†ë„ë¡ ì„œëª… ë°”ê¿ˆ
        }// 105p
      ```
      ```java
        public void update() {
          // subjectì˜ ê²Œí„° ë©”ì†Œë“œë¡œ ê°ì í•„ìš”í•œ ë°ì´í„°ë“¤ì„ ê°€ì ¸ì˜¤ë„ë¡ 
          // Observerêµ¬ìƒí´ë¦¬ìŠ¤ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
          this.temperature = weatherData.getTemperature();
          this.humidity = weatherData.getHumidity();
          display();
        }// 105p
      ```

### ì •ë¦¬
- `Observer Pattern`ì€ **í•˜ë‚˜ì˜ subjectì™€ ì—¬ëŸ¬ê°œì˜ observerë¡œ êµ¬ì„±**ë˜ì–´ ìˆìœ¼ë©°,</br>
  ì´ë²¤íŠ¸ ë°œìƒì‹œì— **subjectê°€ ë™ì¼í•œ interface(Observer)ë¥¼ ì‚¬ìš©í•´ ë‹¤ìˆ˜ì˜ observerì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚´**ëŠ” í˜•ì‹ì…ë‹ˆë‹¤.
  </br>(ì•Œë ¤ì£¼ë©´ ì—…ë°ì´íŠ¸í•œë‹¤!)
- ìƒí˜¸ì‘ìš© í•˜ëŠ” ê°ì²´ ì‚¬ì´ì—ì„œëŠ” ê°€ëŠ¥í•˜ë©´ **ëŠìŠ¨í•œ ê²°í•©**ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
- ë””ìì¸ì›ì¹™
    - **ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ê³¼ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” ë¶€ë¶„ ë¶„ë¦¬**
        - ë³€í•˜ëŠ” ê²ƒ: subject ìƒíƒœ, observer ê°œìˆ˜ì™€ í˜•ì‹
        - subjectë¥¼ ë°”ê¾¸ì§€ ì•Šê³ ë„ observer ë³€ê²½ê°€ëŠ¥
    - **êµ¬í˜„ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ë§ì¶°ì„œ í”„ë¡œê·¸ë˜ë°**
        - subject interface , observer interfaceë¥¼ ì‚¬ìš© â†’ ëŠìŠ¨í•œ ê²°í•©
    - **ìƒì†ë³´ë‹¤ëŠ” êµ¬ì„±ì„ í™œìš©**
        - subjectì™€ observerì‚¬ì´ëŠ” êµ¬ì„±ê´€ê³„</br>
          (subjectì—ëŠ” 0ê°œ ì´ìƒì˜ observerê°€ ìˆë‹¤)

